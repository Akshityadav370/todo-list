<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <!-- External CSS link -->
    <link rel="stylesheet" href="/home.css">
    <!-- Favicon -->
    <link rel="shortcut icon" href="/favicon31.jpg" type="image/x-icon">
    <!-- Font Awesome -->
    
</head>
<body>
    <!-- <h1>The set up is complete lets code the front end and backend</h1> -->
    <div class="wrapper">
        <div class="heading"><span><img id="heading-image" src="/todo-list-icon.jpeg" alt=""></span> TODO List</div>
        
        <div class="input-task">
            <form action="/create-task" method="post">
                <input type="text" name="task" placeholder="Task..." required>
                <select name="category" required>
                    <option value="Urgent & Important" selected>Urgent / Important</option>
                    <option value="Not Urgent & Important">!Urgent / Important</option>
                    <option value="Ugrent & Not Important">Urgent / !Important</option>
                    <option value="Not Urgent & Not Important">!Urgent / !Important</option>
                  </select>
                <!-- <input type="radio" name="category" id=""> -->
                <input type="date" name="ddate" required>

                <button type="submit" class="submit-btn">ADD TASK</button>
            </form>
        </div>

        <div id="tasks-container">
            
            <ul>
                <div id="field">
                    <p>Task</p>
                    <p>Category</p>
                    <p>Due Date</p>
                </div>
                <% for(let i of task_list) { %>
                    <div id="li-container">
                        <li>
                            <div class="checkbox">
                                <input type="checkbox" id="check7" class="check" />
                                <label for="check7" class="label">
                                  <svg width="50" height="50" viewbox="0 0 100 100">
                                    <rect x="30" y="20" width="50" height="50" stroke="black" fill="none" />
                                    <g transform="translate(0,-952.36218)">
                                      <path d="m 13,983 c 33,6 40,26 55,48 " stroke="black" stroke-width="3" class="path1" fill="none" />
                                      <path d="M 75,970 C 51,981 34,1014 25,1031 " stroke="black" stroke-width="3" class="path1" fill="none" />
                                    </g>
                                  </svg>
                                  <!-- <span>Checkbox style 7</span> -->
                                </label>
                            </div>
                            <div id="task-details">
                                <div  class="change-hover">
                                    <p><%= i.task %></p>
                                </div>
                                <div  class="change-hover">
                                    <p><%= i.category %></p>
                                </div>
                                <div >
                                    <p><%= i.ddate.toString().substring(0,15)%></p>
                                    
                                </div>
                            </div>
                            <div class="update-details" style="display: none;">
                                <form action="/update-task/?id=<%= i._id %>" method="post">
                                    <input type="text" name="task" placeholder="Task.." required>
                                    <select name="category" required>
                                        <option value="Urgent & Important" selected>Urgent / Important</option>
                                        <option value="Not Urgent & Important">!Urgent / Important</option>
                                        <option value="Ugrent & Not Important">Urgent / !Important</option>
                                        <option value="Not Urgent & Not Important">!Urgent / !Important</option>
                                    </select>
                                    <input type="date" name="ddate" required>
                                    
                                    <button type="submit" class="submit-btn" style="background-color: lightgreen;">DONE</button>
                                </form>
                            </div>
                            <div class="utilities">
                                <!-- <form action="" method="post">
                                    <input type="checkbox" name="done" id="" class="done">
                                </form> -->
                                <a href="/delete-task/?id=<%= i._id %>">
                                    <img src="/delete.jpeg" class="utility-img" alt="delete-icon">
                                </a>
                                <!-- <a href="" id="update"> -->
                                    <button class="submit-btn" id="update-btn" onclick="displayDiv()">
                                        <!-- <img src="/update.png"  id="update-icon"alt="update-icon"> -->
                                        UPDATE
                                    </button>
                                <!-- </a> -->
                            </div>
                        </li>
                    </div>
                <% } %>
            </ul>


        
    </div>

    <script>
        // var checkbox = document.getElementById('check7');
        // if(checkbox.checked == true){

        // }p
        function displayDiv(){
            const updateDivs = document.querySelectorAll('.update-details');
            // updateDiv.style.display = 'block';
            updateDivs.forEach((updateItem) => {
                updateItem.style.display = 'block';
            })
        }
    </script>
</body>
</html>